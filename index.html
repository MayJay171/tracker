<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol 75: INTELLECT</title>
    <style>
        :root {
            --bg-color: #050a10;       /* Deep Navy Black */
            --card-bg: #0f1c2e;        /* Slightly lighter panel */
            --text-primary: #cbd5e1;   /* Soft White */
            --text-secondary: #64748b; /* Muted Grey */
            --accent: #64ffda;         /* Neon Cyan */
            --accent-dim: rgba(100, 255, 218, 0.1);
            --border: 1px solid #1e293b;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Courier New', monospace; /* Hacker/Terminal font */
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; margin: 0; padding: 20px;
            box-sizing: border-box;
        }

        /* HEADER SECTION */
        .header {
            text-align: center; margin-bottom: 30px; margin-top: 20px;
        }
        .sub-title {
            font-size: 0.7rem; letter-spacing: 4px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 5px;
        }
        .main-title {
            font-size: 3rem; font-weight: 700; color: var(--accent); margin: 0;
            text-shadow: 0 0 15px rgba(100, 255, 218, 0.2);
        }

        /* TASK CARDS */
        .task-list {
            width: 100%; max-width: 500px; list-style: none; padding: 0;
        }

        .task-card {
            background: var(--card-bg);
            margin-bottom: 16px;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid transparent; /* Invisible border unless hovered */
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .task-card:hover {
            border-color: var(--text-secondary);
            transform: translateY(-2px);
            background: #13233a;
        }

        /* COMPLETED STATE */
        .task-card.completed {
            background: var(--accent-dim);
            border-color: var(--accent);
        }

        .left-section { display: flex; align-items: center; gap: 15px; }
        
        /* ICONS */
        .icon { width: 20px; height: 20px; fill: var(--text-secondary); transition: fill 0.3s; }
        .task-card.completed .icon { fill: var(--accent); }

        .task-text { font-size: 0.95rem; font-weight: 600; }

        /* CIRCLE CHECKBOX */
        .check-circle {
            width: 24px; height: 24px;
            border-radius: 50%;
            border: 2px solid var(--text-secondary);
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s;
        }

        .task-card.completed .check-circle {
            background-color: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 10px var(--accent);
        }

        .check-circle::after {
            content: "âœ“"; color: #050a10; font-weight: bold; font-size: 14px; display: none;
        }
        .task-card.completed .check-circle::after { display: block; }

        /* PROGRESS BAR */
        .progress-container {
            width: 100%; max-width: 500px; margin-top: 30px;
        }
        .progress-label {
            display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 8px; letter-spacing: 1px;
        }
        .progress-track {
            width: 100%; height: 6px; background: var(--card-bg); border-radius: 3px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; width: 0%; background-color: var(--accent);
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px var(--accent);
        }

        .status-text { text-align: center; color: var(--text-secondary); font-size: 0.8rem; margin-top: 30px; opacity: 0.7; }

    </style>
</head>
<body>

    <div class="header">
        <div class="sub-title">Daily Objective</div>
        <h1 class="main-title" id="dayDisplay">DAY --</h1>
    </div>

    <ul class="task-list" id="taskList">
        </ul>

    <div class="progress-container">
        <div class="progress-label">
            <span>PROGRESS VECTOR</span>
            <span id="progressPercent">0%</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </div>

    <div class="status-text" id="statusMsg">Initializing System...</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    // --- YOUR NEW CONFIG IS HERE ---
    const firebaseConfig = {
      apiKey: "AIzaSyAEcfXCaXAXA6OJwhTOsJ4kS4PK2kTHT3U",
      authDomain: "my-75-smart-tracker.firebaseapp.com",
      projectId: "my-75-smart-tracker",
      storageBucket: "my-75-smart-tracker.firebasestorage.app",
      messagingSenderId: "410739128536",
      appId: "1:410739128536:web:8416dab4501f27ee42bfad"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
    const docRef = doc(db, "tracker", "user_data");

    // Icons for each task
    const icons = [
        '<path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"/>', // Clock
        '<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>', // Brain
        '<path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>', // Book
        '<path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>', // Pen
        '<path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>' // Phone
    ];

    const taskNames = [
        "Deep Focus (30-45m)",
        "Meta Learning (15m)",
        "Non-Fiction (10+ Pages)",
        "Intellectual Output",
        "Zero Scrolling (Pre-1700)"
    ];

    let state = { day: 1, lastDate: new Date().toDateString(), tasks: [false, false, false, false, false] };

    // Login & Load
    signInAnonymously(auth).then(() => loadData()).catch(e => updateStatus("Auth Error: " + e.message, true));

    async function loadData() {
        try {
            const docSnap = await getDoc(docRef);
            if (docSnap.exists()) { checkResetLogic(docSnap.data()); } 
            else { await saveData(state); render(); }
        } catch (error) { updateStatus("Connection Failed", true); }
    }

    function checkResetLogic(cloudState) {
        const today = new Date().toDateString();
        if (cloudState.lastDate === today) { state = cloudState; render(); return; }
        
        const allDone = cloudState.tasks.every(t => t);
        const diff = Math.ceil(Math.abs(new Date(today) - new Date(cloudState.lastDate)) / (86400000));
        
        state.day = (allDone && diff === 1) ? cloudState.day + 1 : 1;
        state.tasks.fill(false);
        state.lastDate = today;
        saveData(state);
    }

    async function saveData(newState) {
        state = newState; render();
        updateStatus("Syncing...");
        try { await setDoc(docRef, newState); updateStatus("Data Secured"); }
        catch (e) { updateStatus("Save Failed", true); }
    }

    function updateStatus(msg, isError = false) {
        const el = document.getElementById('statusMsg');
        el.innerText = msg;
        el.style.color = isError ? "#ff5555" : "#64748b";
    }

    function render() {
        document.getElementById('dayDisplay').innerText = `DAY ${state.day}`;
        const list = document.getElementById('taskList');
        list.innerHTML = "";
        
        let completedCount = 0;

        taskNames.forEach((name, index) => {
            const isChecked = state.tasks[index];
            if(isChecked) completedCount++;

            const li = document.createElement('li');
            li.className = `task-card ${isChecked ? 'completed' : ''}`;
            li.innerHTML = `
                <div class="left-section">
                    <svg class="icon" viewBox="0 0 24 24">${icons[index]}</svg>
                    <span class="task-text">${name}</span>
                </div>
                <div class="check-circle"></div>
            `;
            
            li.onclick = () => {
                state.tasks[index] = !state.tasks[index];
                saveData(state);
            };
            list.appendChild(li);
        });

        // Update Progress Bar
        const percent = Math.round((completedCount / taskNames.length) * 100);
        document.getElementById('progressBar').style.width = `${percent}%`;
        document.getElementById('progressPercent').innerText = `${percent}%`;
    }
</script>
</body>
</html>